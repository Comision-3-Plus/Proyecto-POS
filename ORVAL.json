{
  "openapi": "3.1.0",
  "info": {
    "title": "Nexus POS API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Autenticaci√≥n"
        ],
        "summary": "Login",
        "description": "Endpoint de Login - OAuth2 Password Flow\n\nValidaciones:\n1. Usuario existe por email\n2. Password es correcto\n3. Usuario est√° activo\n\nReturns:\n    Token JWT con el user_id en el payload (sub)",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login/form": {
      "post": {
        "tags": [
          "Autenticaci√≥n"
        ],
        "summary": "Login Form",
        "description": "Login alternativo compatible con OAuth2PasswordRequestForm\n√ötil para Swagger UI y herramientas OAuth2 est√°ndar",
        "operationId": "login_form_api_v1_auth_login_form_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_login_form_api_v1_auth_login_form_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "Autenticaci√≥n"
        ],
        "summary": "Get Current User Info",
        "description": "Endpoint para obtener informaci√≥n del usuario autenticado\nIncluye datos de la tienda (Multi-Tenant)\n\nDemuestra el uso de las dependencias Multi-Tenant",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Current User Info Api V1 Auth Me Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/tiendas/me": {
      "get": {
        "tags": [
          "Tiendas"
        ],
        "summary": "Get Mi Tienda",
        "description": "Obtener informaci√≥n de mi tienda actual",
        "operationId": "get_mi_tienda_api_v1_tiendas_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Mi Tienda Api V1 Tiendas Me Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Tiendas"
        ],
        "summary": "Update Mi Tienda",
        "description": "Actualizar informaci√≥n de mi tienda\n√ötil para el onboarding y cambio de rubro",
        "operationId": "update_mi_tienda_api_v1_tiendas_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TiendaUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Update Mi Tienda Api V1 Tiendas Me Patch"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/tiendas": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "List Tiendas",
        "description": "Listar todas las tiendas del sistema",
        "operationId": "list_tiendas_api_v1_admin_tiendas_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/TiendaResponse"
                  },
                  "type": "array",
                  "title": "Response List Tiendas Api V1 Admin Tiendas Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Create Tienda",
        "description": "Crear una nueva tienda",
        "operationId": "create_tienda_api_v1_admin_tiendas_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TiendaCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TiendaResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/usuarios": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "List Usuarios",
        "description": "Listar usuarios (opcionalmente filtrados por tienda)",
        "operationId": "list_usuarios_api_v1_admin_usuarios_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tienda_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Tienda Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UsuarioResponse"
                  },
                  "title": "Response List Usuarios Api V1 Admin Usuarios Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Create Usuario",
        "description": "Crear un nuevo usuario para una tienda",
        "operationId": "create_usuario_api_v1_admin_usuarios_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UsuarioCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsuarioResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/usuarios/{usuario_id}": {
      "delete": {
        "tags": [
          "Admin"
        ],
        "summary": "Delete Usuario",
        "description": "Desactivar un usuario (soft delete)",
        "operationId": "delete_usuario_api_v1_admin_usuarios__usuario_id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "usuario_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Usuario Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/usuarios/{usuario_id}/activate": {
      "patch": {
        "tags": [
          "Admin"
        ],
        "summary": "Activate Usuario",
        "description": "Reactivar un usuario desactivado",
        "operationId": "activate_usuario_api_v1_admin_usuarios__usuario_id__activate_patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "usuario_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Usuario Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/onboarding": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Onboarding Tienda",
        "description": "üéØ Endpoint combinado: Crear tienda + usuario due√±o en un solo paso\nIdeal para dar de alta r√°pidamente a nuevos clientes como \"Pedrito el verdulero\"",
        "operationId": "onboarding_tienda_api_v1_admin_onboarding_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OnboardingData"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OnboardingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/productos/": {
      "post": {
        "tags": [
          "Productos"
        ],
        "summary": "Crear Producto",
        "description": "Crea un nuevo producto para la tienda actual\n\n- Asigna autom√°ticamente el tienda_id de la tienda actual\n- Para productos tipo 'ropa', calcula el stock_actual desde las variantes\n- Valida que el SKU no est√© duplicado en la tienda\n- **NUEVO**: Validaci√≥n polim√≥rfica de atributos seg√∫n tipo",
        "operationId": "crear_producto_api_v1_productos__post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductoCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Listar Productos",
        "description": "Lista productos de la tienda actual con filtros opcionales\n\nFiltros:\n- search: Busca por SKU o nombre (case-insensitive)\n- tipo: Filtra por tipo de producto\n- is_active: Filtra por productos activos/inactivos\n\n‚ö° OPTIMIZADO: √çndices en sku, nombre, is_active, tienda_id",
        "operationId": "listar_productos_api_v1_productos__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Buscar por SKU o nombre",
              "title": "Search"
            },
            "description": "Buscar por SKU o nombre"
          },
          {
            "name": "tipo",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "pattern": "^(general|ropa|pesable)$"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Tipo"
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductoReadWithCalculatedStock"
                  },
                  "title": "Response Listar Productos Api V1 Productos  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/productos/buscar": {
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Buscar Productos Avanzado",
        "description": "B√∫squeda avanzada de productos con m√∫ltiples filtros\n\nFiltros disponibles:\n- q: B√∫squeda por nombre o SKU (case-insensitive)\n- tipo: Filtrar por tipo de producto\n- precio_min/max: Rango de precios\n- stock_min: Stock m√≠nimo\n- solo_activos: Solo productos activos\n\nRetorna: items, total, paginaci√≥n",
        "operationId": "buscar_productos_avanzado_api_v1_productos_buscar_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "B√∫squeda por nombre o SKU",
              "title": "Q"
            },
            "description": "B√∫squeda por nombre o SKU"
          },
          {
            "name": "tipo",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filtrar por tipo",
              "title": "Tipo"
            },
            "description": "Filtrar por tipo"
          },
          {
            "name": "precio_min",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Precio Min"
            }
          },
          {
            "name": "precio_max",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Precio Max"
            }
          },
          {
            "name": "stock_min",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "title": "Stock Min"
            }
          },
          {
            "name": "solo_activos",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Solo Activos"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Buscar Productos Avanzado Api V1 Productos Buscar Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/productos/{producto_id}": {
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Obtener Producto",
        "description": "Obtiene un producto espec√≠fico por ID\nValida que pertenezca a la tienda actual (Multi-Tenant)",
        "operationId": "obtener_producto_api_v1_productos__producto_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "producto_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Producto Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoReadWithCalculatedStock"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Productos"
        ],
        "summary": "Actualizar Producto",
        "description": "Actualiza un producto existente\n\n- Solo actualiza los campos enviados (PATCH parcial)\n- Para productos tipo ropa, recalcula el stock si se actualizan las variantes\n- Valida pertenencia a la tienda actual",
        "operationId": "actualizar_producto_api_v1_productos__producto_id__patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "producto_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Producto Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductoUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Productos"
        ],
        "summary": "Eliminar Producto",
        "description": "Elimina un producto (soft delete: marca como inactivo)\nValidaciones Multi-Tenant aplicadas",
        "operationId": "eliminar_producto_api_v1_productos__producto_id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "producto_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Producto Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/productos/sku/{sku}": {
      "get": {
        "tags": [
          "Productos"
        ],
        "summary": "Buscar Por Sku",
        "description": "Busca un producto por SKU dentro de la tienda actual\n√ötil para sistemas de punto de venta con esc√°ner de c√≥digos",
        "operationId": "buscar_por_sku_api_v1_productos_sku__sku__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "sku",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Sku"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoReadWithCalculatedStock"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ventas/scan/{codigo}": {
      "get": {
        "tags": [
          "Ventas"
        ],
        "summary": "Scan Producto",
        "description": "ENDPOINT DE ESCANEO R√ÅPIDO",
        "operationId": "scan_producto_api_v1_ventas_scan__codigo__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "codigo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Codigo"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductoScanRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ventas/checkout": {
      "post": {
        "tags": [
          "Ventas"
        ],
        "summary": "Procesar Venta",
        "description": "ENDPOINT DE CHECKOUT - TRANSACCI√ìN CR√çTICA",
        "operationId": "procesar_venta_api_v1_ventas_checkout_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VentaCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VentaResumen"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ventas/": {
      "get": {
        "tags": [
          "Ventas"
        ],
        "summary": "Listar Ventas",
        "description": "Lista ventas de la tienda actual con filtros opcionales",
        "operationId": "listar_ventas_api_v1_ventas__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "fecha_desde",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Formato: YYYY-MM-DD",
              "title": "Fecha Desde"
            },
            "description": "Formato: YYYY-MM-DD"
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Formato: YYYY-MM-DD",
              "title": "Fecha Hasta"
            },
            "description": "Formato: YYYY-MM-DD"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VentaListRead"
                  },
                  "title": "Response Listar Ventas Api V1 Ventas  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ventas/{venta_id}": {
      "get": {
        "tags": [
          "Ventas"
        ],
        "summary": "Obtener Venta",
        "description": "Obtiene una venta espec√≠fica con todos sus detalles",
        "operationId": "obtener_venta_api_v1_ventas__venta_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "venta_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Venta Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VentaRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ventas/{venta_id}/anular": {
      "patch": {
        "tags": [
          "Ventas"
        ],
        "summary": "Anular Venta",
        "description": "üõ°Ô∏è ENDPOINT PROTEGIDO: Anula una venta (requiere permiso VENTAS_DELETE)\n\nSolo usuarios con rol 'owner' o 'super_admin' pueden anular ventas.\nLos cajeros y admin NO tienen este permiso por defecto.\n\nAcciones:\n- Marca la venta como 'anulado'\n- Devuelve el stock de los productos\n- Registra auditor√≠a de la operaci√≥n",
        "operationId": "anular_venta_api_v1_ventas__venta_id__anular_patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "venta_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Venta Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VentaRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/generate/{venta_id}": {
      "post": {
        "tags": [
          "Pagos"
        ],
        "summary": "Generar Pago",
        "description": "Genera un link de pago o QR de Mercado Pago para una venta\n\nFlujo:\n1. Valida que la venta exista y pertenezca a la tienda\n2. Obtiene los detalles de la venta\n3. Crea una preferencia en Mercado Pago\n4. Retorna el link de pago y QR para mostrar al cliente\n\nReturns:\n    preference_id: ID de la preferencia en MercadoPago\n    init_point: URL para redirigir al cliente\n    qr_code_url: URL del c√≥digo QR (si est√° disponible)",
        "operationId": "generar_pago_api_v1_payments_generate__venta_id__post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "venta_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Venta Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Generar Pago Api V1 Payments Generate  Venta Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/webhook": {
      "post": {
        "tags": [
          "Pagos"
        ],
        "summary": "Webhook Mercadopago",
        "description": "Webhook para recibir notificaciones de Mercado Pago\n\nIMPORTANTE: Este endpoint debe responder 200 OK r√°pidamente\npara evitar reintentos infinitos de MercadoPago\n\nTipos de notificaci√≥n:\n- payment: Pago procesado\n- merchant_order: Orden actualizada\n\nFlujo:\n1. Recibe notificaci√≥n de MercadoPago\n2. Valida firma (opcional pero recomendado)\n3. Consulta el estado del pago\n4. Actualiza la venta en base de datos\n5. Emite factura AFIP si corresponde\n6. Responde 200 OK inmediatamente\n\nDocumentaci√≥n:\nhttps://www.mercadopago.com.ar/developers/es/docs/your-integrations/notifications/webhooks",
        "operationId": "webhook_mercadopago_api_v1_payments_webhook_post",
        "parameters": [
          {
            "name": "x-signature",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Signature"
            }
          },
          {
            "name": "x-request-id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Request-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Webhook Mercadopago Api V1 Payments Webhook Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/status/{venta_id}": {
      "get": {
        "tags": [
          "Pagos"
        ],
        "summary": "Consultar Estado Pago",
        "description": "Consulta el estado de pago de una venta\n\n√ötil para polling desde el frontend mientras espera la confirmaci√≥n",
        "operationId": "consultar_estado_pago_api_v1_payments_status__venta_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "venta_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Venta Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Consultar Estado Pago Api V1 Payments Status  Venta Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/payments/facturar/{venta_id}": {
      "post": {
        "tags": [
          "Pagos"
        ],
        "summary": "Emitir Factura Manual",
        "description": "Emite una factura AFIP manualmente para una venta\n\n√ötil cuando se necesita facturar despu√©s del pago\no para ventas en efectivo",
        "operationId": "emitir_factura_manual_api_v1_payments_facturar__venta_id__post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "venta_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Venta Id"
            }
          },
          {
            "name": "cuit_cliente",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Cuit Cliente"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Emitir Factura Manual Api V1 Payments Facturar  Venta Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/insights/": {
      "get": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Listar Insights",
        "description": "Lista los insights de la tienda ordenados por urgencia y fecha\n\nOrdenamiento:\n1. Por urgencia (CRITICA \u003E ALTA \u003E MEDIA \u003E BAJA)\n2. Por fecha de creaci√≥n (m√°s recientes primero)\n\nFiltros:\n- activos_solo: Mostrar solo activos (por defecto True)\n- nivel_urgencia: Filtrar por nivel espec√≠fico\n- tipo: Filtrar por tipo espec√≠fico",
        "operationId": "listar_insights_api_v1_insights__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "activos_solo",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Mostrar solo insights activos",
              "default": true,
              "title": "Activos Solo"
            },
            "description": "Mostrar solo insights activos"
          },
          {
            "name": "nivel_urgencia",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Filtrar por urgencia: BAJA, MEDIA, ALTA, CRITICA",
              "title": "Nivel Urgencia"
            },
            "description": "Filtrar por urgencia: BAJA, MEDIA, ALTA, CRITICA"
          },
          {
            "name": "tipo",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Filtrar por tipo: STOCK_BAJO, VENTAS_DIARIAS, etc.",
              "title": "Tipo"
            },
            "description": "Filtrar por tipo: STOCK_BAJO, VENTAS_DIARIAS, etc."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InsightRead"
                  },
                  "title": "Response Listar Insights Api V1 Insights  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/insights/{insight_id}/dismiss": {
      "post": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Archivar Insight",
        "description": "Archiva un insight (marca como inactivo)\n\n√ötil cuando el usuario ya vio la alerta o tom√≥ acci√≥n\n\nValidaciones:\n- El insight debe pertenecer a la tienda actual\n- Multi-Tenant security",
        "operationId": "archivar_insight_api_v1_insights__insight_id__dismiss_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "insight_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Insight Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/insights/refresh": {
      "post": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Refrescar Insights",
        "description": "Endpoint para forzar la generaci√≥n de insights manualmente\n\n√ötil para:\n- Demos y pruebas\n- Refresh manual desde el dashboard\n- Testing de la l√≥gica de insights\n\nArgs:\n    force: Si es True, genera insights aunque ya existan recientes\n           (√∫til para testing, pero puede crear duplicados)\n\nReturns:\n    Resumen de insights generados",
        "operationId": "refrescar_insights_api_v1_insights_refresh_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "force",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Forzar generaci√≥n aunque ya existan alertas recientes",
              "default": false,
              "title": "Force"
            },
            "description": "Forzar generaci√≥n aunque ya existan alertas recientes"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InsightRefreshResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/insights/background-refresh": {
      "post": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Refrescar Insights Background",
        "description": "Genera insights en segundo plano usando FastAPI BackgroundTasks\n\nRetorna inmediatamente 202 Accepted mientras procesa en background\n\nIdeal para no bloquear la respuesta del API cuando hay muchos datos",
        "operationId": "refrescar_insights_background_api_v1_insights_background_refresh_post",
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Refrescar Insights Background Api V1 Insights Background Refresh Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/insights/stats": {
      "get": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Estadisticas Insights",
        "description": "Obtiene estad√≠sticas de insights de la tienda\n\nReturns:\n    Contadores por tipo, urgencia y estado",
        "operationId": "estadisticas_insights_api_v1_insights_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Estadisticas Insights Api V1 Insights Stats Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/insights/clear-all": {
      "delete": {
        "tags": [
          "Insights & Alertas"
        ],
        "summary": "Limpiar Insights",
        "description": "Limpia insights de la tienda\n\nArgs:\n    solo_archivados: Si es True, solo elimina los archivados\n                    Si es False, elimina TODOS (usar con cuidado)\n\nATENCI√ìN: Esta operaci√≥n es irreversible",
        "operationId": "limpiar_insights_api_v1_insights_clear_all_delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "solo_archivados",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Eliminar solo los archivados",
              "default": false,
              "title": "Solo Archivados"
            },
            "description": "Eliminar solo los archivados"
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reportes/ventas/resumen": {
      "get": {
        "tags": [
          "Reportes"
        ],
        "summary": "Obtener Resumen Ventas",
        "description": "Obtiene un resumen general de ventas para un per√≠odo\n\nIncluye:\n- Total de ventas realizadas\n- Monto total vendido\n- Ticket promedio\n- M√©todo de pago m√°s usado\n- Producto m√°s vendido",
        "operationId": "obtener_resumen_ventas_api_v1_reportes_ventas_resumen_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "fecha_desde",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Fecha inicial (default: hace 30 d√≠as)",
              "title": "Fecha Desde"
            },
            "description": "Fecha inicial (default: hace 30 d√≠as)"
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Fecha final (default: hoy)",
              "title": "Fecha Hasta"
            },
            "description": "Fecha final (default: hoy)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResumenVentas"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reportes/productos/mas-vendidos": {
      "get": {
        "tags": [
          "Reportes"
        ],
        "summary": "Obtener Productos Mas Vendidos",
        "description": "Retorna los productos m√°s vendidos ordenados por cantidad\n\n√ötil para:\n- Identificar productos estrella\n- Optimizar inventario\n- Planificar promociones",
        "operationId": "obtener_productos_mas_vendidos_api_v1_reportes_productos_mas_vendidos_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limite",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Cantidad de productos a retornar",
              "default": 10,
              "title": "Limite"
            },
            "description": "Cantidad de productos a retornar"
          },
          {
            "name": "fecha_desde",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Desde"
            }
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Hasta"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductoMasVendido"
                  },
                  "title": "Response Obtener Productos Mas Vendidos Api V1 Reportes Productos Mas Vendidos Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reportes/productos/rentabilidad": {
      "get": {
        "tags": [
          "Reportes"
        ],
        "summary": "Analizar Rentabilidad Productos",
        "description": "Analiza la rentabilidad de productos vendidos\n\nCalcula:\n- Costo total (precio_costo √ó cantidad)\n- Ingreso total (precio_venta √ó cantidad)\n- Utilidad bruta (ingreso - costo)\n- Margen de ganancia (%)\n\nPermite ordenar por:\n- utilidad: Mayor ganancia absoluta\n- margen: Mayor porcentaje de ganancia\n- cantidad: M√°s vendidos",
        "operationId": "analizar_rentabilidad_productos_api_v1_reportes_productos_rentabilidad_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limite",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limite"
            }
          },
          {
            "name": "orden",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(utilidad|margen|cantidad)$",
              "default": "utilidad",
              "title": "Orden"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RentabilidadProducto"
                  },
                  "title": "Response Analizar Rentabilidad Productos Api V1 Reportes Productos Rentabilidad Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reportes/ventas/tendencia-diaria": {
      "get": {
        "tags": [
          "Reportes"
        ],
        "summary": "Obtener Tendencia Ventas Diaria",
        "description": "Retorna la tendencia de ventas d√≠a por d√≠a\n\n√ötil para:\n- Gr√°ficos de tendencia\n- Identificar patrones de venta\n- Proyecciones de demanda",
        "operationId": "obtener_tendencia_ventas_diaria_api_v1_reportes_ventas_tendencia_diaria_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dias",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "description": "Cantidad de d√≠as a analizar",
              "default": 30,
              "title": "Dias"
            },
            "description": "Cantidad de d√≠as a analizar"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VentasPorPeriodo"
                  },
                  "title": "Response Obtener Tendencia Ventas Diaria Api V1 Reportes Ventas Tendencia Diaria Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check Basic",
        "description": "Health check b√°sico (liveness probe)\nSolo verifica que la aplicaci√≥n est√© corriendo",
        "operationId": "health_check_basic_api_v1_health__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness Check",
        "description": "Readiness probe - verifica que todos los servicios cr√≠ticos est√©n listos\n\nRetorna 200 si est√° listo, 503 si no",
        "operationId": "readiness_check_api_v1_health_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/metrics": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "System Metrics",
        "description": "M√©tricas del sistema para monitoreo\n\nIncluye:\n- Uso de base de datos\n- Estad√≠sticas de requests\n- Uptime",
        "operationId": "system_metrics_api_v1_health_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/circuits": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Circuit Breakers Status",
        "description": "Estado de los Circuit Breakers\n\nüõ°Ô∏è Monitorea la salud de integraciones externas (MercadoPago, AFIP)\n\nEstados posibles:\n- CLOSED: Funcionamiento normal\n- OPEN: Servicio no disponible, usando fallback\n- HALF_OPEN: Probando recuperaci√≥n\n\nReturns:\n    Estado de cada circuit breaker con m√©tricas",
        "operationId": "circuit_breakers_status_api_v1_health_circuits_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventario/ajustar-stock": {
      "post": {
        "tags": [
          "Inventario"
        ],
        "summary": "Ajustar Stock Manual",
        "description": "Ajusta manualmente el stock de un producto\n\nCasos de uso:\n- Correcci√≥n de inventario\n- P√©rdida/robo de mercader√≠a\n- Producto da√±ado\n- Inventario f√≠sico\n\nIMPORTANTE: Genera registro de auditor√≠a",
        "operationId": "ajustar_stock_manual_api_v1_inventario_ajustar_stock_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AjusteStockRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/inventario/alertas-stock-bajo": {
      "get": {
        "tags": [
          "Inventario"
        ],
        "summary": "Obtener Alertas Stock Bajo",
        "description": "Obtiene lista de productos con stock bajo\n\n√ötil para:\n- Dashboard de alertas\n- Planificaci√≥n de compras\n- Prevenir quiebres de stock",
        "operationId": "obtener_alertas_stock_bajo_api_v1_inventario_alertas_stock_bajo_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "umbral",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 10,
              "title": "Umbral"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductoBajoStock"
                  },
                  "title": "Response Obtener Alertas Stock Bajo Api V1 Inventario Alertas Stock Bajo Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inventario/sin-stock": {
      "get": {
        "tags": [
          "Inventario"
        ],
        "summary": "Obtener Productos Sin Stock",
        "description": "Retorna productos completamente sin stock\n\nUrgente para reabastecimiento",
        "operationId": "obtener_productos_sin_stock_api_v1_inventario_sin_stock_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/inventario/estadisticas": {
      "get": {
        "tags": [
          "Inventario"
        ],
        "summary": "Obtener Estadisticas Inventario",
        "description": "Estad√≠sticas generales del inventario\n\nIncluye:\n- Total de productos activos\n- Valor total de inventario\n- Productos sin stock\n- Productos con stock bajo",
        "operationId": "obtener_estadisticas_inventario_api_v1_inventario_estadisticas_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/dashboard/resumen": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Obtener Dashboard Resumen",
        "description": "Endpoint principal del dashboard con todas las m√©tricas consolidadas\n\nIncluye:\n- Ventas (hoy, ayer, semana, mes con % de cambio)\n- Inventario (totales, bajo stock, valor)\n- Productos destacados\n- Alertas cr√≠ticas\n\n**Cacheado por 60 segundos para mejor performance**",
        "operationId": "obtener_dashboard_resumen_api_v1_dashboard_resumen_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResumen"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/dashboard/ventas-tiempo-real": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Obtener Ventas Tiempo Real",
        "description": "Ventas de las √∫ltimas 24 horas agrupadas por hora (para gr√°fico en tiempo real)\n\n**Sin cach√© para datos en tiempo real**",
        "operationId": "obtener_ventas_tiempo_real_api_v1_dashboard_ventas_tiempo_real_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Obtener Ventas Tiempo Real Api V1 Dashboard Ventas Tiempo Real Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/exportar/productos/csv": {
      "get": {
        "tags": [
          "Exportaci√≥n"
        ],
        "summary": "Exportar Productos Csv",
        "description": "Exporta listado de productos a formato CSV\n\nColumnas: SKU, Nombre, Tipo, Precio Venta, Precio Costo, Stock, Estado",
        "operationId": "exportar_productos_csv_api_v1_exportar_productos_csv_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "solo_activos",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Solo Activos"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/exportar/ventas/csv": {
      "get": {
        "tags": [
          "Exportaci√≥n"
        ],
        "summary": "Exportar Ventas Csv",
        "description": "Exporta ventas a formato CSV con filtros de fecha\n\nColumnas: Fecha, ID Venta, Total, M√©todo Pago, Status, Cantidad Items",
        "operationId": "exportar_ventas_csv_api_v1_exportar_ventas_csv_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "fecha_desde",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Desde"
            }
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Hasta"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/exportar/reportes/rentabilidad/csv": {
      "get": {
        "tags": [
          "Exportaci√≥n"
        ],
        "summary": "Exportar Rentabilidad Csv",
        "description": "Exporta an√°lisis de rentabilidad de productos a CSV\n\nColumnas: Producto, SKU, Cantidad Vendida, Costo Total, Ingreso Total, Utilidad, Margen %",
        "operationId": "exportar_rentabilidad_csv_api_v1_exportar_reportes_rentabilidad_csv_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "fecha_desde",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Desde"
            }
          },
          {
            "name": "fecha_hasta",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Fecha Hasta"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Health check endpoint",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Endpoint de salud para monitoreo",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AjusteStockRequest": {
        "properties": {
          "producto_id": {
            "type": "string",
            "format": "uuid",
            "title": "Producto Id"
          },
          "cantidad_nueva": {
            "type": "number",
            "minimum": 0,
            "title": "Cantidad Nueva",
            "description": "Nueva cantidad de stock"
          },
          "motivo": {
            "type": "string",
            "maxLength": 500,
            "minLength": 3,
            "title": "Motivo"
          }
        },
        "type": "object",
        "required": [
          "producto_id",
          "cantidad_nueva",
          "motivo"
        ],
        "title": "AjusteStockRequest",
        "description": "Request para ajuste manual de stock"
      },
      "Body_login_form_api_v1_auth_login_form_post": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "password"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_login_form_api_v1_auth_login_form_post"
      },
      "DashboardResumen": {
        "properties": {
          "ventas": {
            "$ref": "#/components/schemas/MetricaVentas"
          },
          "inventario": {
            "$ref": "#/components/schemas/MetricaInventario"
          },
          "productos_destacados": {
            "items": {
              "$ref": "#/components/schemas/ProductoDestacado"
            },
            "type": "array",
            "title": "Productos Destacados"
          },
          "alertas_criticas": {
            "type": "integer",
            "title": "Alertas Criticas"
          },
          "ultima_actualizacion": {
            "type": "string",
            "format": "date-time",
            "title": "Ultima Actualizacion"
          }
        },
        "type": "object",
        "required": [
          "ventas",
          "inventario",
          "productos_destacados",
          "alertas_criticas",
          "ultima_actualizacion"
        ],
        "title": "DashboardResumen",
        "description": "Resumen completo del dashboard"
      },
      "DetalleVentaRead": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "producto_id": {
            "type": "string",
            "format": "uuid",
            "title": "Producto Id"
          },
          "producto_nombre": {
            "type": "string",
            "title": "Producto Nombre",
            "description": "Nombre del producto al momento de la venta"
          },
          "producto_sku": {
            "type": "string",
            "title": "Producto Sku",
            "description": "SKU del producto"
          },
          "cantidad": {
            "type": "number",
            "title": "Cantidad"
          },
          "precio_unitario": {
            "type": "number",
            "title": "Precio Unitario"
          },
          "subtotal": {
            "type": "number",
            "title": "Subtotal"
          }
        },
        "type": "object",
        "required": [
          "id",
          "producto_id",
          "producto_nombre",
          "producto_sku",
          "cantidad",
          "precio_unitario",
          "subtotal"
        ],
        "title": "DetalleVentaRead",
        "description": "Schema de lectura para un detalle de venta\nIncluye informaci√≥n del producto"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InsightRead": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tipo": {
            "type": "string",
            "title": "Tipo"
          },
          "mensaje": {
            "type": "string",
            "title": "Mensaje"
          },
          "nivel_urgencia": {
            "type": "string",
            "title": "Nivel Urgencia"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "extra_data": {
            "type": "object",
            "title": "Extra Data"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tipo",
          "mensaje",
          "nivel_urgencia",
          "is_active",
          "extra_data",
          "created_at"
        ],
        "title": "InsightRead",
        "description": "Schema de lectura para un Insight"
      },
      "InsightRefreshResponse": {
        "properties": {
          "mensaje": {
            "type": "string",
            "title": "Mensaje"
          },
          "insights_generados": {
            "type": "object",
            "title": "Insights Generados"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "mensaje",
          "insights_generados",
          "total"
        ],
        "title": "InsightRefreshResponse",
        "description": "Respuesta del endpoint de refresh"
      },
      "ItemVentaInput": {
        "properties": {
          "producto_id": {
            "type": "string",
            "format": "uuid",
            "title": "Producto Id"
          },
          "cantidad": {
            "type": "number",
            "exclusiveMinimum": 0,
            "title": "Cantidad",
            "description": "Cantidad a vender (puede ser decimal para pesables)"
          }
        },
        "type": "object",
        "required": [
          "producto_id",
          "cantidad"
        ],
        "title": "ItemVentaInput",
        "description": "Schema de entrada para un item de venta\nUsado en el proceso de checkout"
      },
      "LoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "LoginRequest",
        "description": "Schema de request para login"
      },
      "MetricaInventario": {
        "properties": {
          "total_productos": {
            "type": "integer",
            "title": "Total Productos"
          },
          "productos_activos": {
            "type": "integer",
            "title": "Productos Activos"
          },
          "productos_bajo_stock": {
            "type": "integer",
            "title": "Productos Bajo Stock"
          },
          "valor_total_inventario": {
            "type": "number",
            "title": "Valor Total Inventario"
          }
        },
        "type": "object",
        "required": [
          "total_productos",
          "productos_activos",
          "productos_bajo_stock",
          "valor_total_inventario"
        ],
        "title": "MetricaInventario",
        "description": "M√©trica de inventario"
      },
      "MetricaVentas": {
        "properties": {
          "hoy": {
            "type": "number",
            "title": "Hoy"
          },
          "ayer": {
            "type": "number",
            "title": "Ayer"
          },
          "semana": {
            "type": "number",
            "title": "Semana"
          },
          "mes": {
            "type": "number",
            "title": "Mes"
          },
          "tickets_emitidos": {
            "type": "integer",
            "title": "Tickets Emitidos"
          },
          "cambio_diario_porcentaje": {
            "type": "number",
            "title": "Cambio Diario Porcentaje"
          },
          "cambio_semanal_porcentaje": {
            "type": "number",
            "title": "Cambio Semanal Porcentaje"
          },
          "ultimos_7_dias": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Ultimos 7 Dias"
          }
        },
        "type": "object",
        "required": [
          "hoy",
          "ayer",
          "semana",
          "mes",
          "tickets_emitidos",
          "cambio_diario_porcentaje",
          "cambio_semanal_porcentaje",
          "ultimos_7_dias"
        ],
        "title": "MetricaVentas",
        "description": "M√©trica de ventas"
      },
      "OnboardingData": {
        "properties": {
          "nombre_tienda": {
            "type": "string",
            "title": "Nombre Tienda"
          },
          "rubro": {
            "type": "string",
            "title": "Rubro"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "nombre_completo": {
            "type": "string",
            "title": "Nombre Completo"
          },
          "rol": {
            "type": "string",
            "title": "Rol",
            "default": "admin"
          }
        },
        "type": "object",
        "required": [
          "nombre_tienda",
          "rubro",
          "email",
          "password",
          "nombre_completo"
        ],
        "title": "OnboardingData",
        "description": "Schema para crear tienda + usuario due√±o en un solo paso"
      },
      "OnboardingResponse": {
        "properties": {
          "tienda": {
            "$ref": "#/components/schemas/TiendaResponse"
          },
          "usuario": {
            "$ref": "#/components/schemas/UsuarioResponse"
          }
        },
        "type": "object",
        "required": [
          "tienda",
          "usuario"
        ],
        "title": "OnboardingResponse"
      },
      "ProductoBajoStock": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "sku": {
            "type": "string",
            "title": "Sku"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "stock_actual": {
            "type": "number",
            "title": "Stock Actual"
          },
          "stock_minimo": {
            "type": "number",
            "title": "Stock Minimo",
            "default": 10
          },
          "debe_reabastecer": {
            "type": "boolean",
            "title": "Debe Reabastecer",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "sku",
          "nombre",
          "stock_actual"
        ],
        "title": "ProductoBajoStock",
        "description": "Producto con stock bajo"
      },
      "ProductoCreate": {
        "properties": {
          "nombre": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Sku"
          },
          "descripcion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Descripcion"
          },
          "precio_venta": {
            "type": "number",
            "exclusiveMinimum": 0,
            "title": "Precio Venta",
            "description": "Debe ser mayor a 0"
          },
          "precio_costo": {
            "type": "number",
            "minimum": 0,
            "title": "Precio Costo",
            "description": "Debe ser mayor o igual a 0"
          },
          "unidad_medida": {
            "type": "string",
            "title": "Unidad Medida",
            "description": "UNIDAD, KILO, LITRO, METRO",
            "default": "UNIDAD"
          },
          "tipo": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Tipo"
          },
          "atributos": {
            "type": "object",
            "title": "Atributos"
          },
          "stock_actual": {
            "type": "number",
            "minimum": 0,
            "title": "Stock Actual",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "nombre",
          "sku",
          "precio_venta",
          "precio_costo",
          "tipo"
        ],
        "title": "ProductoCreate",
        "description": "Schema para crear un Producto\nIncluye validadores personalizados seg√∫n el tipo"
      },
      "ProductoDestacado": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "title": "Sku"
          },
          "stock": {
            "type": "number",
            "title": "Stock"
          },
          "ventas_hoy": {
            "type": "integer",
            "title": "Ventas Hoy"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nombre",
          "sku",
          "stock",
          "ventas_hoy"
        ],
        "title": "ProductoDestacado",
        "description": "Producto destacado del dashboard"
      },
      "ProductoMasVendido": {
        "properties": {
          "producto_id": {
            "type": "string",
            "format": "uuid",
            "title": "Producto Id"
          },
          "sku": {
            "type": "string",
            "title": "Sku"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "cantidad_vendida": {
            "type": "number",
            "title": "Cantidad Vendida"
          },
          "total_recaudado": {
            "type": "number",
            "title": "Total Recaudado"
          },
          "veces_vendido": {
            "type": "integer",
            "title": "Veces Vendido"
          }
        },
        "type": "object",
        "required": [
          "producto_id",
          "sku",
          "nombre",
          "cantidad_vendida",
          "total_recaudado",
          "veces_vendido"
        ],
        "title": "ProductoMasVendido",
        "description": "Schema para productos m√°s vendidos"
      },
      "ProductoRead": {
        "properties": {
          "nombre": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Sku"
          },
          "descripcion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Descripcion"
          },
          "precio_venta": {
            "type": "number",
            "exclusiveMinimum": 0,
            "title": "Precio Venta",
            "description": "Debe ser mayor a 0"
          },
          "precio_costo": {
            "type": "number",
            "minimum": 0,
            "title": "Precio Costo",
            "description": "Debe ser mayor o igual a 0"
          },
          "unidad_medida": {
            "type": "string",
            "title": "Unidad Medida",
            "description": "UNIDAD, KILO, LITRO, METRO",
            "default": "UNIDAD"
          },
          "tipo": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Tipo"
          },
          "atributos": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Atributos"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "stock_actual": {
            "type": "number",
            "title": "Stock Actual"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "tienda_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tienda Id"
          }
        },
        "type": "object",
        "required": [
          "nombre",
          "sku",
          "precio_venta",
          "precio_costo",
          "tipo",
          "id",
          "stock_actual",
          "is_active",
          "created_at",
          "updated_at",
          "tienda_id"
        ],
        "title": "ProductoRead",
        "description": "Schema de respuesta de Producto"
      },
      "ProductoReadWithCalculatedStock": {
        "properties": {
          "nombre": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Sku"
          },
          "descripcion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Descripcion"
          },
          "precio_venta": {
            "type": "number",
            "exclusiveMinimum": 0,
            "title": "Precio Venta",
            "description": "Debe ser mayor a 0"
          },
          "precio_costo": {
            "type": "number",
            "minimum": 0,
            "title": "Precio Costo",
            "description": "Debe ser mayor o igual a 0"
          },
          "unidad_medida": {
            "type": "string",
            "title": "Unidad Medida",
            "description": "UNIDAD, KILO, LITRO, METRO",
            "default": "UNIDAD"
          },
          "tipo": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Tipo"
          },
          "atributos": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Atributos"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "stock_actual": {
            "type": "number",
            "title": "Stock Actual"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "tienda_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tienda Id"
          },
          "stock_calculado": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stock Calculado",
            "description": "Stock total calculado desde variantes (solo para tipo ropa)"
          }
        },
        "type": "object",
        "required": [
          "nombre",
          "sku",
          "precio_venta",
          "precio_costo",
          "tipo",
          "id",
          "stock_actual",
          "is_active",
          "created_at",
          "updated_at",
          "tienda_id"
        ],
        "title": "ProductoReadWithCalculatedStock",
        "description": "Schema extendido que incluye el stock calculado para productos tipo ropa"
      },
      "ProductoScanRead": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "title": "Sku"
          },
          "precio_venta": {
            "type": "number",
            "title": "Precio Venta"
          },
          "stock_actual": {
            "type": "number",
            "title": "Stock Actual"
          },
          "tipo": {
            "type": "string",
            "title": "Tipo"
          },
          "tiene_stock": {
            "type": "boolean",
            "title": "Tiene Stock",
            "description": "Indicador r√°pido de disponibilidad"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nombre",
          "sku",
          "precio_venta",
          "stock_actual",
          "tipo",
          "tiene_stock"
        ],
        "title": "ProductoScanRead",
        "description": "Schema minimalista para el endpoint de escaneo\nSolo datos esenciales para velocidad m√°xima"
      },
      "ProductoUpdate": {
        "properties": {
          "nombre": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Nombre"
          },
          "sku": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Sku"
          },
          "descripcion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Descripcion"
          },
          "precio_venta": {
            "anyOf": [
              {
                "type": "number",
                "exclusiveMinimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Precio Venta"
          },
          "precio_costo": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Precio Costo"
          },
          "stock_actual": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Stock Actual"
          },
          "unidad_medida": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unidad Medida",
            "description": "UNIDAD, KILO, LITRO, METRO"
          },
          "tipo": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Tipo"
          },
          "atributos": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Atributos"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "ProductoUpdate",
        "description": "Schema para actualizar un Producto"
      },
      "RentabilidadProducto": {
        "properties": {
          "producto_id": {
            "type": "string",
            "format": "uuid",
            "title": "Producto Id"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "sku": {
            "type": "string",
            "title": "Sku"
          },
          "cantidad_vendida": {
            "type": "number",
            "title": "Cantidad Vendida"
          },
          "costo_total": {
            "type": "number",
            "title": "Costo Total"
          },
          "ingreso_total": {
            "type": "number",
            "title": "Ingreso Total"
          },
          "utilidad_bruta": {
            "type": "number",
            "title": "Utilidad Bruta"
          },
          "margen_porcentaje": {
            "type": "number",
            "title": "Margen Porcentaje"
          }
        },
        "type": "object",
        "required": [
          "producto_id",
          "nombre",
          "sku",
          "cantidad_vendida",
          "costo_total",
          "ingreso_total",
          "utilidad_bruta",
          "margen_porcentaje"
        ],
        "title": "RentabilidadProducto",
        "description": "Schema para an√°lisis de rentabilidad"
      },
      "ResumenVentas": {
        "properties": {
          "periodo_inicio": {
            "type": "string",
            "format": "date-time",
            "title": "Periodo Inicio"
          },
          "periodo_fin": {
            "type": "string",
            "format": "date-time",
            "title": "Periodo Fin"
          },
          "total_ventas": {
            "type": "integer",
            "title": "Total Ventas"
          },
          "monto_total": {
            "type": "number",
            "title": "Monto Total"
          },
          "ticket_promedio": {
            "type": "number",
            "title": "Ticket Promedio"
          },
          "metodo_pago_mas_usado": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metodo Pago Mas Usado"
          },
          "producto_mas_vendido": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Producto Mas Vendido"
          }
        },
        "type": "object",
        "required": [
          "periodo_inicio",
          "periodo_fin",
          "total_ventas",
          "monto_total",
          "ticket_promedio"
        ],
        "title": "ResumenVentas",
        "description": "Schema para resumen de ventas"
      },
      "TiendaCreate": {
        "properties": {
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "rubro": {
            "type": "string",
            "title": "Rubro"
          }
        },
        "type": "object",
        "required": [
          "nombre",
          "rubro"
        ],
        "title": "TiendaCreate"
      },
      "TiendaResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "nombre": {
            "type": "string",
            "title": "Nombre"
          },
          "rubro": {
            "type": "string",
            "title": "Rubro"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "nombre",
          "rubro"
        ],
        "title": "TiendaResponse"
      },
      "TiendaUpdate": {
        "properties": {
          "nombre": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nombre"
          },
          "rubro": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rubro"
          }
        },
        "type": "object",
        "title": "TiendaUpdate",
        "description": "Schema para actualizar tienda"
      },
      "Token": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "user": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "User"
          }
        },
        "type": "object",
        "required": [
          "access_token"
        ],
        "title": "Token",
        "description": "Schema de respuesta de autenticaci√≥n"
      },
      "UsuarioCreate": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "full_name": {
            "type": "string",
            "title": "Full Name"
          },
          "rol": {
            "type": "string",
            "title": "Rol",
            "default": "cajero"
          },
          "tienda_id": {
            "type": "string",
            "title": "Tienda Id"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password",
          "full_name",
          "tienda_id"
        ],
        "title": "UsuarioCreate"
      },
      "UsuarioResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "full_name": {
            "type": "string",
            "title": "Full Name"
          },
          "rol": {
            "type": "string",
            "title": "Rol"
          },
          "tienda_id": {
            "type": "string",
            "title": "Tienda Id"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "full_name",
          "rol",
          "tienda_id",
          "is_active"
        ],
        "title": "UsuarioResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VentaCreate": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ItemVentaInput"
            },
            "type": "array",
            "minItems": 1,
            "title": "Items",
            "description": "Lista de productos a vender"
          },
          "metodo_pago": {
            "type": "string",
            "pattern": "^(EFECTIVO|MERCADOPAGO|TARJETA|efectivo|tarjeta_debito|tarjeta_credito|transferencia)$",
            "title": "Metodo Pago",
            "description": "M√©todo de pago utilizado"
          }
        },
        "type": "object",
        "required": [
          "items",
          "metodo_pago"
        ],
        "title": "VentaCreate",
        "description": "Schema para crear una venta completa\nIncluye lista de items y m√©todo de pago"
      },
      "VentaListRead": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "fecha": {
            "type": "string",
            "format": "date-time",
            "title": "Fecha"
          },
          "total": {
            "type": "number",
            "title": "Total"
          },
          "metodo_pago": {
            "type": "string",
            "title": "Metodo Pago"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "cantidad_items": {
            "type": "integer",
            "title": "Cantidad Items",
            "description": "Cantidad de items en la venta"
          }
        },
        "type": "object",
        "required": [
          "id",
          "fecha",
          "total",
          "metodo_pago",
          "created_at",
          "cantidad_items"
        ],
        "title": "VentaListRead",
        "description": "Schema simplificado para listado de ventas\nSin detalles para optimizar performance"
      },
      "VentaRead": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "fecha": {
            "type": "string",
            "format": "date-time",
            "title": "Fecha"
          },
          "total": {
            "type": "number",
            "title": "Total"
          },
          "metodo_pago": {
            "type": "string",
            "title": "Metodo Pago"
          },
          "tienda_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tienda Id"
          },
          "detalles": {
            "items": {
              "$ref": "#/components/schemas/DetalleVentaRead"
            },
            "type": "array",
            "title": "Detalles"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "fecha",
          "total",
          "metodo_pago",
          "tienda_id",
          "created_at"
        ],
        "title": "VentaRead",
        "description": "Schema de lectura para una venta completa\nIncluye detalles expandidos"
      },
      "VentaResumen": {
        "properties": {
          "venta_id": {
            "type": "string",
            "format": "uuid",
            "title": "Venta Id"
          },
          "fecha": {
            "type": "string",
            "format": "date-time",
            "title": "Fecha"
          },
          "total": {
            "type": "number",
            "title": "Total"
          },
          "metodo_pago": {
            "type": "string",
            "title": "Metodo Pago"
          },
          "cantidad_items": {
            "type": "integer",
            "title": "Cantidad Items"
          },
          "mensaje": {
            "type": "string",
            "title": "Mensaje",
            "default": "Venta procesada exitosamente"
          }
        },
        "type": "object",
        "required": [
          "venta_id",
          "fecha",
          "total",
          "metodo_pago",
          "cantidad_items"
        ],
        "title": "VentaResumen",
        "description": "Schema para mostrar resumen de venta despu√©s del checkout\nInformaci√≥n condensada para ticket/comprobante"
      },
      "VentasPorPeriodo": {
        "properties": {
          "fecha": {
            "type": "string",
            "title": "Fecha"
          },
          "cantidad_ventas": {
            "type": "integer",
            "title": "Cantidad Ventas"
          },
          "total_vendido": {
            "type": "number",
            "title": "Total Vendido"
          },
          "ticket_promedio": {
            "type": "number",
            "title": "Ticket Promedio"
          }
        },
        "type": "object",
        "required": [
          "fecha",
          "cantidad_ventas",
          "total_vendido",
          "ticket_promedio"
        ],
        "title": "VentasPorPeriodo",
        "description": "Schema para ventas por per√≠odo"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {

            },
            "tokenUrl": "/api/v1/auth/login"
          }
        }
      }
    }
  }
}