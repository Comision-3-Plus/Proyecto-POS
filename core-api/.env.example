# ============================================================
# üî• NEXUS POS - CONFIGURACI√ìN DE ENTORNO
# ============================================================
# IMPORTANTE: 
# 1. Copiar este archivo a .env y completar con valores reales
# 2. NUNCA commitear el archivo .env a Git
# 3. Agregar .env a .gitignore
# ============================================================

# ============================================================
# üóÑÔ∏è BASE DE DATOS (PostgreSQL)
# ============================================================
# OPCI√ìN 1: SUPABASE (Producci√≥n) ‚úÖ RECOMENDADO
# ============================================================
# üîπ Para la APP (FastAPI) - Puerto 6543 (Transaction Pooler)
# Usa PgBouncer en modo transacci√≥n - R√°pido pero NO soporta migraciones
DATABASE_URL=postgresql+asyncpg://postgres.vnliytzpgsdkuhbcrrku:Blendsoft1!@aws-1-us-east-1.pooler.supabase.com:6543/postgres?ssl=require

# üîπ Para MIGRACIONES (Alembic) - Puerto 5432 (Conexi√≥n Directa)
# Necesaria para comandos DDL (CREATE TABLE, ALTER, etc.)
DATABASE_MIGRATION_URL=postgresql+asyncpg://postgres.vnliytzpgsdkuhbcrrku:Blendsoft1!@aws-1-us-east-1.pooler.supabase.com:5432/postgres?ssl=require

# ‚ö†Ô∏è NOTAS IMPORTANTES SUPABASE:
# - Reemplazar [TU_PASSWORD] con tu contrase√±a real de Supabase
# - NO remover ?ssl=require al final - Supabase requiere SSL
# - El nombre de usuario puede variar seg√∫n tu proyecto Supabase
# - DATABASE_URL usa puerto 6543 (pooler) para mejor performance
# - DATABASE_MIGRATION_URL usa puerto 5432 (directo) para migraciones

# ============================================================
# OPCI√ìN 2: DOCKER LOCAL (Desarrollo)
# ============================================================
# Si usas Docker Compose local, comenta las URLs de arriba y usa:
# POSTGRES_SERVER=db
# POSTGRES_USER=nexuspos
# POSTGRES_PASSWORD=nexuspos_secret
# POSTGRES_DB=nexus_pos
# POSTGRES_PORT=5432

# ============================================================
# üîê SEGURIDAD & AUTENTICACI√ìN
# ============================================================
# SECRET_KEY: Clave para firmar JWT tokens
# GENERAR CON: openssl rand -hex 64
SECRET_KEY=CAMBIAR_EN_PRODUCCION_GENERAR_CON_OPENSSL_RAND_HEX_64

# ALGORITHM: Algoritmo de firma JWT (HS256 por defecto)
ALGORITHM=HS256

# ACCESS_TOKEN_EXPIRE_MINUTES: Tiempo de expiraci√≥n del token (7 d√≠as = 10080 minutos)
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ============================================================
# üåê CORS (Cross-Origin Resource Sharing)
# ============================================================
# URLs permitidas para hacer requests a la API (separadas por coma)
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://tu-dominio.com

# ============================================================
# üì¨ MENSAJER√çA (RabbitMQ)
# ============================================================
# OPCI√ìN 1: CloudAMQP (Producci√≥n)
# RABBITMQ_URL=amqps://usuario:password@tu-cluster.cloudamqp.com/vhost

# OPCI√ìN 2: Docker Local (Desarrollo)
RABBITMQ_URL=amqp://user:pass@rabbitmq:5672/

# ============================================================
# üíæ CACHE & LOCKS (Redis)
# ============================================================
# OPCI√ìN 1: Redis Cloud (Producci√≥n)
# REDIS_URL=redis://:password@redis-12345.c1.us-east-1-2.ec2.cloud.redislabs.com:12345

# OPCI√ìN 2: Docker Local (Desarrollo)
REDIS_URL=redis://redis:6379/0

# ============================================================
# üí≥ MERCADO PAGO (Pagos)
# ============================================================
# MERCADOPAGO_ACCESS_TOKEN: Token de acceso de tu cuenta de Mercado Pago
# Obtener en: https://www.mercadopago.com.ar/developers/panel/credentials
MERCADOPAGO_ACCESS_TOKEN=

# MERCADOPAGO_WEBHOOK_SECRET: Secret para validar webhooks (opcional)
MERCADOPAGO_WEBHOOK_SECRET=

# ============================================================
# üßæ AFIP (Facturaci√≥n Electr√≥nica Argentina)
# ============================================================
# AFIP_CERT: Ruta al certificado .pem de AFIP
AFIP_CERT=/path/to/certificado.pem

# AFIP_KEY: Ruta a la clave privada .key de AFIP
AFIP_KEY=/path/to/clave.key

# AFIP_CUIT: CUIT de la empresa
AFIP_CUIT=20123456789

# AFIP_PRODUCTION: false = Testing, true = Producci√≥n
AFIP_PRODUCTION=false

# ============================================================
# üîÑ WORKERS (Go Services)
# ============================================================
# DB_DSN: Conexi√≥n para workers Go (puerto 5432 directo)
DB_DSN=postgres://postgres.kdqfohbtxlmykjubxqok:[TU_PASSWORD]@aws-1-us-east-2.pooler.supabase.com:5432/postgres?sslmode=require

# SENDGRID_API_KEY: Para env√≠o de emails desde workers
SENDGRID_API_KEY=

# ENCRYPTION_KEY: Clave de 32 bytes para cifrado de tokens de integraci√≥n
# GENERAR CON: openssl rand -hex 32
ENCRYPTION_KEY=CAMBIAR_EN_PRODUCCION_32_BYTES_HEX

# ============================================================
# üõçÔ∏è SHOPIFY OAUTH (M√≥dulo 3 - Integraciones)
# ============================================================
# Configuraci√≥n para OAuth 2.0 con Shopify
# Obtener credenciales en: https://partners.shopify.com

# SHOPIFY_CLIENT_ID: API Key de tu Shopify App
SHOPIFY_CLIENT_ID=

# SHOPIFY_CLIENT_SECRET: API Secret Key de tu Shopify App
SHOPIFY_CLIENT_SECRET=

# SHOPIFY_REDIRECT_URI: URL de callback OAuth (debe coincidir con Shopify Partners)
# Ejemplo: https://tu-dominio.com/api/v1/integrations/shopify/callback
SHOPIFY_REDIRECT_URI=

# ============================================================
# üåê URLs DE LA APLICACI√ìN (M√≥dulo 3 y 4)
# ============================================================
# BASE_URL: URL p√∫blica del backend (para webhooks y OAuth)
BASE_URL=http://localhost:8000

# FRONTEND_URL: URL del frontend (para redirects despu√©s de OAuth)
FRONTEND_URL=http://localhost:5173

# ============================================================
# üîê ENCRIPTACI√ìN DE INTEGRACIONES
# ============================================================
# INTEGRATION_ENCRYPTION_KEY: Clave Fernet para cifrar access tokens
# GENERAR CON: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
INTEGRATION_ENCRYPTION_KEY=

# ============================================================
# üõçÔ∏è SHOPIFY & MERCADOLIBRE (Workers)
# ============================================================
# URLs y tokens para integraci√≥n con marketplaces
SHOPIFY_URL=https://tu-tienda.myshopify.com/admin/api/2024-01/graphql.json
SHOPIFY_TOKEN=shpat_xxxxxxxxxxxxx

MELI_URL=https://api.mercadolibre.com/items
MELI_TOKEN=APP_USR-xxxxxxxxxxxxx

# ============================================================
# üìä MONITOREO & LOGGING (Opcional)
# ============================================================
# SENTRY_DSN: Para tracking de errores en producci√≥n
# SENTRY_DSN=https://xxxxx@o123456.ingest.sentry.io/123456

# LOG_LEVEL: Nivel de logging (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# LOG_LEVEL=INFO

# ============================================================
# üöÄ DEPLOYMENT (Railway, Render, etc.)
# ============================================================
# PORT: Puerto donde corre la API (Railway usa PORT env var)
# PORT=8000

# ENVIRONMENT: development | staging | production
# ENVIRONMENT=production

# ============================================================
# üìù NOTAS FINALES
# ============================================================
# ‚úÖ CHECKLIST DE SEGURIDAD:
# 1. [ ] Generar SECRET_KEY √∫nico con openssl rand -hex 64
# 2. [ ] Generar ENCRYPTION_KEY √∫nico con openssl rand -hex 32
# 3. [ ] Cambiar contrase√±as de PostgreSQL si usas Docker local
# 4. [ ] Configurar URLs de Supabase correctamente (puerto 6543 y 5432)
# 5. [ ] Agregar .env a .gitignore
# 6. [ ] NO commitear credenciales reales a Git
# 7. [ ] Usar variables de entorno en Railway/Render/Docker
# 8. [ ] Habilitar SSL para Supabase (ssl=require en URL)
# 9. [ ] Rotar secrets cada 90 d√≠as en producci√≥n
# 10. [ ] Usar secrets managers en producci√≥n (AWS Secrets Manager, etc.)
